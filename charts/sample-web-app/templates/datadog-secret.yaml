{{- if and .Values.opentelemetry.enabled .Values.opentelemetry.datadog.enabled }}
{{- if not .Values.opentelemetry.datadog.apiKeySecret }}
# Note: This is a placeholder secret. In production, create this secret manually or use external secrets.
# kubectl create secret generic datadog-api-key --from-literal=api-key=YOUR_DATADOG_API_KEY -n sample-web-app
apiVersion: v1
kind: Secret
metadata:
  name: datadog-api-key
  labels:
    {{- include "sample-web-app.labels" . | nindent 4 }}
  annotations:
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "-5"
type: Opaque
data:
  # REPLACE THIS: echo -n "your-actual-api-key" | base64
  api-key: {{ .Values.opentelemetry.datadog.apiKey | default "REPLACE_WITH_BASE64_ENCODED_API_KEY" | b64enc }}
{{- end }}
{{- end }}
